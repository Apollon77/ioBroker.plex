<html>
<head>
	<!-- these 4 files always have to be included -->
	<link rel="stylesheet" type="text/css" href="../../lib/css/materialize.css">
	<link rel="stylesheet" type="text/css" href="../../css/adapter.css"/>

	<script type="text/javascript" src="../../lib/js/jquery-3.2.1.min.js"></script>
	<script type="text/javascript" src="../../socket.io/socket.io.js"></script>

	<!-- these files always have to be included -->
	<script type="text/javascript" src="../../js/translate.js"></script>
	<script type="text/javascript" src="../../lib/js/materialize.js"></script>
	<script type="text/javascript" src="../../js/adapter-settings.js"></script>
	
	<script type="text/javascript" src="words.js"></script>
	<script type="text/javascript">
	<!--
	let saveParams = {};
	let globalParams;
	
	// load
	function load(settings, onChange)
	{
		initModal(settings.modal);
		_load(settings, onChange);
		globalParams = settings;
		
		if (settings.plexPassword)
			$('#plexPassword').val(decode(settings.encryptionKey, settings.plexPassword));
		
		if (settings.tautulliToken)
			$('#tautulliToken').val(decode(settings.encryptionKey, settings.tautulliToken));
	}
	
	// save
	function save(callback)
	{
		saveParams.plexPort = $('#plexPort').val() ? $('#plexPort').val() : 32400;
		saveParams.plexProtocol = $('#plexSecure').prop('checked') ? 'https' : 'http';
		saveParams.plexPassword = $('#plexPassword').val() ? encode(globalParams.encryptionKey, $('#plexPassword').val()) : '';
		saveParams.tautulliToken = $('#tautulliToken').val() ? encode(globalParams.encryptionKey, $('#tautulliToken').val()) : '';
		
		_save(callback, saveParams);
	}
	
	// modal
	function initModal(modal)
	{
        $('.modal').modal(); // initialize all modals
		
		if (!modal)
		{
			// add listener
			$('#buttonNotAgain').on('click', function()
			{
				saveParams.modal = true;
			});
			
			// open modal
			$('#modal').modal('open');
		}
	}
	
	// page loaded
	$(window).on('load', function()
	{
	});
	// -->
	</script>
	<script type="text/javascript" src="admin.js"></script>
	<link rel="stylesheet" type="text/css" href="admin.css"/>
	
</head>
<body>


<div class="m adapter-container" id="settings">
	
	<!-- Modal Structure -->
	<div id="modal" class="modal">
		<div class="modal-content">
			<h3 class="modalTitle translate">modalTitle</h3>
			<p class="modalMessage translate">modalMessage</p>
			
		</div>
		<div class="modal-footer">
			<a href="#!" id="buttonNotAgain" class="modal-close btn waves-effect waves-green translate">buttonNotAgain</a>
			<a href="#!" id="buttonDismiss" class="modal-close btn-flat translate">buttonDismiss</a>
		</div>
	</div>

	<div class="row">
		
		<!-- TABS -->
		<div class="col s12">
			<ul class="tabs">
				<li class="tab col s3"><a class="translate active" href="#config">tab_config</a></li>
				<li class="tab col s3"><a target="_blank" class="translate" href="https://github.com/Zefau/ioBroker.plex#smart-home--alexa-integration-using-iobrokerjavascript">tab_alexa</a></li>
				<li class="tab col s3"><a target="_blank" class="translate" href="https://github.com/Zefau/ioBroker.plex#iobrokerplex">tab_info</a></li>
			</ul>
		</div>
		
		<!-- CONFIG -->
		<div id="config" class="col s12">
			
			<!-- Plex -->
			<div class="row">
				<div class="col s12 m12">
					<div class="row" style="margin-bottom: 0">
						<div class="col s12 m12">
							<p class="translate title">plexAuth</p>
						</div>
					</div>
					<div class="row box">
						<p class="subtitle translate">plexAuthInfo</p>
						
						<div class="input-field col s2 m2">
							<input class="value" id="plexIp" type="text" />
							<label for="plexIp" class="translate">plexIp</label>
						</div>
						<div class="input-field col s1 m1">
							<input class="value" id="plexPort" type="number" placeholder="32400" />
							<label for="plexPort" class="translate">plexPort</label>
						</div>
						<div class="input-field col s3 m3">
							<input class="value" id="plexSecure" type="checkbox" />
							<label for="plexSecure" class="translate">plexSecure</label>
						</div>
						<div class="input-field col s3 m3">
							<input class="value" id="plexUser" type="text" />
							<label for="plexUser" class="translate">plexUser</label>
						</div>
						<div class="input-field col s3 m3">
							<input class="value" id="plexPassword" type="password" />
							<label for="plexPassword" class="translate">plexPassword</label>
						</div>
					</div>
					
				</div>
			</div>
			
			<!-- Tautulli -->
			<div class="row">
				<div class="col s12 m12">
					<div class="row" style="margin-bottom: 0">
						<div class="col s12 m12">
							<p class="translate title">tautulliAuth</p>
						</div>
					</div>
					<div class="row box">
						<p class="subtitle translate">tautulliAuthInfo</p>
						
						<div class="input-field col s4 m4">
							<input class="value" id="tautulliIp" type="text" />
							<label for="tautulliIp" class="translate">tautulliIp</label>
						</div>
						<div class="input-field col s3 m3">
							<input class="value" id="tautulliPort" type="number" placeholder="8181" />
							<label for="tautulliPort" class="translate">tautulliPort</label>
						</div>
						<div class="input-field col s5 m5">
							<input class="value" id="tautulliToken" type="text" />
							<label for="tautulliToken" class="translate">tautulliToken</label>
						</div>
					</div>
					
				</div>
			</div>
			<!-- Tautulli -->
			<div class="row">
				<div class="col s12 m12">
					<div class="row" style="margin-bottom: 0">
						<div class="col s12 m12">
							<p class="translate title">events</p>
						</div>
					</div>
					<div class="row box">
						<p class="subtitle translate">eventsInfo</p>
						
						<div class="input-field col s4 m4">
							<input class="value" id="port" type="number" placeholder="41891" />
							<label for="port" class="translate">webhookPort</label>
						</div>
						
					</div>
				</div>
			</div>
			
			<!-- Other & Events -->
			<div class="row">
				<div class="col s12 m12">
					<div class="row" style="margin-bottom: 0">
						<div class="col s12 m12">
							<p class="translate title">other</p>
						</div>
					</div>
					<div class="row box">
						<div class="input-field col s4 m4">
							<p class="subtitle translate">allItemsInfo</p>
							
							<input class="value" id="allItems" type="checkbox" />
							<label for="allItems" class="translate">allItems</label>
						</div>
						<div class="input-field col s4 m4">
							<p class="subtitle translate">refreshInfo</p>
							
							<input class="value" id="refresh" type="number" placeholder="0" />
							<label for="refresh" class="translate" style="display: none">refresh</label>
						</div>
						<div class="input-field col s4 m4">
							<p class="subtitle translate">resetMediaInfo</p>
							
							<input class="value" id="resetMedia" type="checkbox" />
							<label for="resetMedia" class="translate">resetMedia</label>
						</div>
						
					</div>
				</div>
			</div>
			
		</div>
		
	</div>

</div>

</body>
</html>
